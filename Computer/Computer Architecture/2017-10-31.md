## 2017-10-31

- For every instruction, the first two steps are identical:
    - Send the __program counter (PC)__ to the memory that contains the code and fetch the instruction from that memory.
    - Read one or two registers, using fields of the instruction to select the registers to read.
- __Multiplexor__ or __data selector__: a logic element that chooses from among the multiple sources and steers one of those sources to its destination.
- __Control unit__: has the instruction as an input, is used to determine how to set the control lines for the functional units and two of the multiplexors.
- The datapath elements in the MIPS implementation consist of two different types of logic elements:
    - __Combinational element__: elements that operate on data values.
    - __State elements__: elements that contain state, e.g. _memories_ and _registers_.
- A state element has at least two inputs and one output.
    - The required inputs are the data value to be written into the element and the _clock_.
    - The output from a state element provides the value that was written in an earlier clock cycle.
- The __clock__ is used to determine when the state element should be written; a state element can be read at any time.
- __Edge-triggered clocking__: any values stored in a sequential logic element are updated only on a clock edge.
- Because only state elements can store a data value, any collection of combinational logic must have its inputs come from a set of state elements and its outputs written into a set of state elements.
- __Control signal__: a signal used for multiplexor selection or for directing the operation of a functional unit.
- Both the clock signal and the write control signal are inputs, and the state element is changed only when the write control signal is _asserted_ and a clock edge occurs.
- __Datapath element__: a unit used to operate on or hold data within a processor.
- A __register file__ is a collection of registers in which any register can be read or written by specifying the number of the register in the file.
- __Branch target address__ is computed by adding the sign-extended offset field of the instruction to the PC.
- The jump instruction operates by replacing the lower 28 bits of the PC with the lower 26 bits of the instruction shifted left by 2 bits.
- The MIPS ALU in defines the 6 following combinations of 4-bit control inputs: and, or, add, subtract, set on less than, nor.
- 4-bit ALU control input is generated using a small control unit that has as inputs the function field of the instruction and a 2-bit control field (ALUOp):
    - add (ALUOp $= 00$) for loads and stores.
    - subtract (ALUOp $= 01$) for _beq_.
    - determined by the operation encoded in the _funct_ field (ALUOp $= 10$).
![](https://github.com/b00401062/b00401062.github.io/raw/master/Computer/Computer%20Architecture/fig4-12.png)
- As a step in designing this logic, it is useful to create a __truth table__ for the interesting combinations of the function code field and the ALUOp bits.
- The effect of each of the seven control signals: ![](https://github.com/b00401062/b00401062.github.io/raw/master/Computer/Computer%20Architecture/fig4-16.png)
- The control line _PCSrc_ should be asserted if the instruction is _branch on equal_ (a decision that the control unit can make) and the _zero_ output of the ALU.
- For a control function, the outputs are the control lines, and the input is the 6-bit opcode field, _Op [5:0]_.
- __Single-cycle implementation__: an implementation in which an instruction is executed in one clock cycle.
- We can implement a jump by storing into the PC the concatenation of (1) the upper 4 bits of the current PC + 4, (2) the 26-bit immediate field of the jump instruction, and (3) the bits 00.
- Although the single-cycle design will work correctly, it would not be used in modern designs because it is inefficient since the clock cycle is too long.
- The clock cycle is equal to the worst-case delay for all instructions, so it's useless to try implementation techniques that reduce the delay of the common case but do not improve the worst-case cycle time.
